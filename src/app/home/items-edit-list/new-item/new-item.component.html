<div [formGroup]="itemForm">
  <h3>{{ item ? "Edit" : "Add" }} item</h3>
  <mat-form-field appearance="fill" class="input">
    <mat-label>Name</mat-label>
    <input
      matInput
      matInputAutofocus
      formControlName="name"
      type="text"
      maxlength="100"
      placeholder="Name"
      required
    />
    <mat-hint align="end">
      {{ itemForm.get("name")?.value?.length }} / 100
    </mat-hint>
    @if (itemForm.get('name')?.hasError('required')) {
      <mat-error>Name is Required</mat-error>
    }
  </mat-form-field>
  <mat-form-field appearance="fill" class="input">
    <mat-label>Amount</mat-label>
    <input
      matInput
      formControlName="amount"
      type="number"
      min="1"
      max="100"
      placeholder="Amount"
      required
    />
    @if (itemForm.get('amount')?.hasError('required')) {
      <mat-error>Amount is Required</mat-error>
    } @if (itemForm.get('amount')?.hasError('min')) {
      <mat-error>Amount needs to be atleast 1</mat-error>
    } @if (itemForm.get('amount')?.hasError('max')) {
      <mat-error>Amount needs to be max 100</mat-error>
    }
  </mat-form-field>

  @if (item) {
    <mat-checkbox class="checkbox" formControlName="open"> Is open </mat-checkbox>
  }
</div>

<div class="horizontal">
  <button
    mat-raised-button
    color="primary"
    [disabled]="itemForm.invalid"
    (click)="item ? updateItem() : addItem()"
  >
    {{ item ? "Save" : "Add" }}
  </button>
  @if (!item) {
    <mat-checkbox [(ngModel)]="addMore"> Add more </mat-checkbox>
  }
</div>
